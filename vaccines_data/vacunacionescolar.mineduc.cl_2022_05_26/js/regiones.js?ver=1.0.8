var percentFormat = wNumb({
  decimals: 0,
  suffix: '%',
  negativeBefore: '-'
}); 

var graficoArica ={
  
  datasets: [
      {
          backgroundColor: ['rgb(93, 80, 120)','rgb(237, 106, 87)','rgb(41,164,200)'],
          borderColor: ['#FFFFFF','#FFFFFF'],
          data: [84,10,6]
      }
  ]
};

  var graficoTarapaca ={
    labels: ['Porcentaje de vacunados con esquema completo','Porcentaje de no vacunados','Porcentaje de vacunados con esquema incompleto'],
    datasets: [
        {
            backgroundColor: ['rgb(93, 80, 120)','rgb(237, 106, 87)','rgb(41,164,200)'],
            borderColor: ['#FFFFFF','#FFFFFF'],
            data: [82,11,7]
        }
    ]
  };

  var graficoAntofagasta ={
    labels: ['Porcentaje de vacunados con esquema completo','Porcentaje de no vacunados','Porcentaje de vacunados con esquema incompleto'],
    datasets: [
        {
            backgroundColor: ['rgb(93, 80, 120)','rgb(237, 106, 87)','rgb(41,164,200)'],
            borderColor: ['#FFFFFF','#FFFFFF'],
            data: [89,6,5]
        }
    ]
  };

  var graficoAtacama ={
    labels: ['Porcentaje de vacunados con esquema completo','Porcentaje de no vacunados','Porcentaje de vacunados con esquema incompleto'],
    datasets: [
        {
            backgroundColor: ['rgb(93, 80, 120)','rgb(237, 106, 87)','rgb(41,164,200)'],
            borderColor: ['#FFFFFF','#FFFFFF'],
            data: [87,8,5]
        }
    ]
  };

  var graficoCoquimbo ={
    labels: ['Porcentaje de vacunados con esquema completo','Porcentaje de no vacunados','Porcentaje de vacunados con esquema incompleto'],
    datasets: [
        {
            backgroundColor: ['rgb(93, 80, 120)','rgb(237, 106, 87)','rgb(41,164,200)'],
            borderColor: ['#FFFFFF','#FFFFFF'],
            data: [87,9,4]
        }
    ]
  };

  var graficoValparaiso ={
    labels: ['Porcentaje de vacunados con esquema completo','Porcentaje de no vacunados','Porcentaje de vacunados con esquema incompleto'],
    datasets: [
        {
            backgroundColor: ['rgb(93, 80, 120)','rgb(237, 106, 87)','rgb(41,164,200)'],
            borderColor: ['#FFFFFF','#FFFFFF'],
            data: [88,8,4]
        }
    ]
  };

  var graficoMetropolitana ={
    labels: ['Porcentaje de vacunados con esquema completo','Porcentaje de no vacunados','Porcentaje de vacunados con esquema incompleto'],
    datasets: [
        {
            backgroundColor: ['rgb(93, 80, 120)','rgb(237, 106, 87)','rgb(41,164,200)'],
            borderColor: ['#FFFFFF','#FFFFFF'],
            data: [90,6,4]
        }
    ]
  };

  var graficoOhiggins ={
    labels: ['Porcentaje de vacunados con esquema completo','Porcentaje de no vacunados','Porcentaje de vacunados con esquema incompleto'],
    datasets: [
        {
            backgroundColor: ['rgb(93, 80, 120)','rgb(237, 106, 87)','rgb(41,164,200)'],
            borderColor: ['#FFFFFF','#FFFFFF'],
            data: [91,6,3]
        }
    ]
  };

  var graficoMaule ={
    labels: ['Porcentaje de vacunados con esquema completo','Porcentaje de no vacunados','Porcentaje de vacunados con esquema incompleto'],
    datasets: [
        {
            backgroundColor: ['rgb(93, 80, 120)','rgb(237, 106, 87)','rgb(41,164,200)'],
            borderColor: ['#FFFFFF','#FFFFFF'],
            data: [90,6,4]
        }
    ]
  };

  var graficoNuble ={
    labels: ['Porcentaje de vacunados con esquema completo','Porcentaje de no vacunados','Porcentaje de vacunados con esquema incompleto'],
    datasets: [
        {
            backgroundColor: ['rgb(93, 80, 120)','rgb(237, 106, 87)','rgb(41,164,200)'],
            borderColor: ['#FFFFFF','#FFFFFF'],
            data: [91,7,2]
        }
    ]
  };

  var graficoBiobio ={
    labels: ['Porcentaje de vacunados con esquema completo','Porcentaje de no vacunados','Porcentaje de vacunados con esquema incompleto'],
    datasets: [
        {
            backgroundColor: ['rgb(93, 80, 120)','rgb(237, 106, 87)','rgb(41,164,200)'],
            borderColor: ['#FFFFFF','#FFFFFF'],
            data: [88,8,4]
        }
    ]
  };

  var graficoAraucania ={
    labels: ['Porcentaje de vacunados con esquema completo','Porcentaje de no vacunados','Porcentaje de vacunados con esquema incompleto'],
    datasets: [
        {
            backgroundColor: ['rgb(93, 80, 120)','rgb(237, 106, 87)','rgb(41,164,200)'],
            borderColor: ['#FFFFFF','#FFFFFF'],
            data: [85,11,4]
        }
    ]
  };

  var graficoRios ={
    labels: ['Porcentaje de vacunados con esquema completo','Porcentaje de no vacunados','Porcentaje de vacunados con esquema incompleto'],
    datasets: [
        {
            backgroundColor: ['rgb(93, 80, 120)','rgb(237, 106, 87)','rgb(41,164,200)'],
            borderColor: ['#FFFFFF','#FFFFFF'],
            data: [85,10,5]
        }
    ]
  };

  var graficoLagos ={
    labels: ['Porcentaje de vacunados con esquema completo','Porcentaje de no vacunados','Porcentaje de vacunados con esquema incompleto'],
    datasets: [
        {
            backgroundColor: ['rgb(93, 80, 120)','rgb(237, 106, 87)','rgb(41,164,200)'],
            borderColor: ['#FFFFFF','#FFFFFF'],
            data: [82,13,5]
        }
    ]
  };

  var graficoAysen ={
    labels: ['Porcentaje de vacunados con esquema completo','Porcentaje de no vacunados','Porcentaje de vacunados con esquema incompleto'],
    datasets: [
        {
            backgroundColor: ['rgb(93, 80, 120)','rgb(237, 106, 87)','rgb(41,164,200)'],
            borderColor: ['#FFFFFF','#FFFFFF'],
            data: [86,9,5]
        }
    ]
  };

  var graficoMagallanes ={
    labels: ['Porcentaje de vacunados con esquema completo','Porcentaje de no vacunados','Porcentaje de vacunados con esquema incompleto'],
    datasets: [
        {
            backgroundColor: ['rgb(93, 80, 120)','rgb(237, 106, 87)','rgb(41,164,200)'],
            borderColor: ['#FFFFFF','#FFFFFF'],
            data: [90,6,4]
        }
    ]
  };


var chartOptions2 = {
  responsive: true,
  maintainAspectRatio: true,
 

  legend: {
      display: false,
      labels: {
          boxWidth: 20,
      },
      position: 'bottom',
      align: 'center'
  },
  options: {
    label:{
        dislay:false,
    },
      legend: {
          display: false,
          labels: {
              fontColor: 'rgb(255, 255, 255)'
          }
      }
  },
  tooltips: {
      callbacks: {
          label: function (tooltipItem, data) {
              var index = tooltipItem.index;
              return data.labels[index] + ': ' + percentFormat.to(data.datasets[0].data[index]) + '';
          }
      }
  },
  plugins: {
      datalabels: {
          anchor: 'center',
          backgroundColor: function (context) {
              return context.dataset.backgroundColor;
          },
          borderColor: 'white',
          borderRadius: 25,
          borderWidth: 1,
          color: 'white',
          font: {
              size: 14
          },
          formatter: function (value, pieID) {
              var sum = 0;
              var dataArr = pieID.chart.data.datasets[0].data;
              dataArr.map(function (data) {
                  sum += data;
              });
              var percentage = percentFormat.to((value * 100 / sum));
              return percentage;
          }
      }
  }
};



function myFun(parameter, valor) {
    let ob = document.getElementById("res2");
    
    let nombreRegion;
   
   
    switch(parameter) {
        case "graficoArica":
         nombreRegion = " Región de Arica y Parinacota"// code block
          break;
          case "graficoTarapaca":
         nombreRegion = "Región de Tarapacá"// code block
          break;
          case "graficoAntofagasta":
         nombreRegion = "Región de Antofagasta"// code block
          break;
          case "graficoAtacama":
         nombreRegion = "Región de Atacama"// code block
          break;
          case "graficoCoquimbo":
         nombreRegion = "Región de Coquimbo"// code block
          break;
          case "graficoValparaiso":
         nombreRegion = "Región de Valparaíso"// code block
          break;
        case "graficoMetropolitana":
         nombreRegion = "Región Metropolitana de Santiago"// code block
          break;
          case "graficoOhiggins":
            nombreRegion = "Región del Libertador Gral. Bernardo O'Higgins"// code block
             break;
             case "graficoMaule":
                nombreRegion = "Región del Maule"// code block
                 break;
                 case "graficoNuble":
                    nombreRegion = "Región de Ñuble"// code block
                     break;
                     case "graficoBiobio":
                        nombreRegion = "Región del Biobío"// code block
                         break;
                         case "graficoAraucania":
                        nombreRegion = "Región de La Araucanía"// code block
                         break;
                         case "graficoRios":
                        nombreRegion = "Región de Los Ríos"// code block
                         break;
                         case "graficoLagos":
                            nombreRegion = "Región de los Lagos"// code block
                             break;
                             case "graficoAysen":
                                nombreRegion = " Región Aysén del G. Carlos Ibáñez del Campo"// code block
                                 break;
                                 case "graficoMagallanes":
                                    nombreRegion = " Región de Magallanes y de la Antártica Chilena"// code block
                                     break;

       
        default:
          // code block
      }
    res2.innerHTML ='';
    res2.innerHTML +=`
    <button onclick="myFun2()" id="cerrarResultado2" class="cerrarResultado2 w-100 btn bg-transparent border-0 text-end text-celeste fs-1">X</button>
    <div class="fs-2 text-naranjo pt-2 pb-5">${nombreRegion}</div>
          <div class="d-none d-md-flex">
             <span class="fs-6 text-start flex-grow flex-fill text-gris">RANGO ETARIO</span>
             <span class="fs-6 text-center flex-grow flex-fill text-gris">VACUNADOS CON <br/>ESQUEMA COMPLETO</span>
          </div>
          <div class="d-block d-md-none">
            <div class="fs-6 text-start flex-grow flex-fill text-gris">RANGO ETARIO</div>
            <div class="fs-3 text-start text-celeste">6 - 17 AÑOS </div>
          </div>
         
           
           <hr class="d-none d-md-bock bg-gris2" style="height: 8px; opacity: 1;">

           <div class="d-none d-md-flex py-5">
            <span class="fs-3 text-start text-celeste d-flex flex-column justify-content-between" style="width: 50%;">6 - 17 AÑOS <br/> <br/><p class="fs-6 text-naranjo">Porcentaje de no vacunados</p><p class="fs-6 text-celeste">Porcentaje de vacunados con esquema incompleto</p><p class="fs-6 text-morado2">Porcentaje de vacunados con esquema completo</p></span>
            <span class="text-center" style="width: 50%;"><canvas id="myChart-${parameter}"></canvas></span>  
          </div>

          <div class="d-block d-md-none">
             <div class="fs-6 text-center flex-grow flex-fill text-gris">VACUNADOS CON <br/>ESQUEMA COMPLETO</div>
             <div class="text-center" style="width: 90%;"><canvas id="myChart2-${parameter}"></canvas></div>  
             <div class="">
                <p class="fs-6 text-naranjo text-start">Porcentaje de no vacunados</p>
                <p class="fs-6 text-celeste text-start">Porcentaje de vacunados con esquema incompleto</p>
                <p class="fs-6 text-morado2 text-start">Porcentaje de vacunados con esquema completo</p>
             </div>
          </div>
         
    `;
    const ctx20 = document.getElementById('myChart-'+parameter);
    var lost = eval(parameter);
    new Chart(ctx20, {
    type: 'doughnut',   
    data: lost,
    options: chartOptions2
    });

    const ctx21 = document.getElementById('myChart2-'+parameter);
    var lost = eval(parameter);
    new Chart(ctx21, {
    type: 'doughnut',   
    data: lost,
    options: chartOptions2
    });

    var top = document.getElementById("res3").offsetTop;
    var height = document.getElementById("res3").offsetHeight;
    var alto = top + height;
    window.scrollTo(0, alto);
    ob.classList.add("mostrar");
    ob.classList.remove("nomostrar");
}


function myFun2() {
    var ob = document.getElementById("res2");
    ob.classList.add("nomostrar");
    res2.innerHTML ='';
    ob.classList.remove("mostrar");
}
